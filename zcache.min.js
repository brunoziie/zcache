/*
 http://www.opensource.org/licenses/mit-license.php The MIT License
 @author: Bruno Silva | eu@brunoziie.com 
*/
(function(f){var e={debug:!1,cacheDuration:1800,scriptsPath:""},c={stack:[],isCompatible:function(){this.isCompatible="undefined"!==typeof f.localStorage?function(){return!0}:function(){return!1};return this.isCompatible()},isExpired:function(a){if("undefined"!==typeof a.created){var g=new Date;a=new Date(a.created);a.setSeconds(a.getSeconds()+e.cacheDuration);return a<g?!0:!1}return!0},hasCache:function(a){if(this.isCompatible())return this.hasCache=function(a){return null!==f.localStorage.getItem(a)?
!0:!1},this.hasCache(a);this.hasCache=function(){};return!1},addToCache:function(a,g){this.isCompatible()?(this.addToCache=function(a,d){f.localStorage.setItem(a,JSON.stringify(d))},this.addToCache(a,g)):this.addToCache=function(){}},getFromCache:function(a){return JSON.parse(f.localStorage.getItem(a))},removeFromCache:function(a){a=e.scriptsPath+a;this.hasCache(a)&&f.localStorage.removeItem(a)},loadScriptText:function(a,g){var c=this,d=new XMLHttpRequest,b=g||!0;d.open("GET",a);d.onreadystatechange=
function(){4===d.readyState&&(200===d.status?b&&c.addToCache(a,{data:d.responseText,created:new Date}):!0===e.debug&&console.log('"'+a+'"" not loaded'))};c.putInHead(a,!0);d.send()},putInStack:function(a){this.stack.push(a)},processStack:function(a){var c=this,e,d,b;0<this.stack.length?(d=document.createElement("script"),e=this.stack[0],b=e.content,this.stack.shift(),e.viaSrc?(d.defer=!0,d.src=b,d.onload=function(){c.processStack(a)},f.document.head.appendChild(d)):(d.text=b,f.document.head.appendChild(d),
c.processStack(a))):(a=a||function(){},a())},putInHead:function(a,c){this.putInStack({content:a,viaSrc:c||!1})}};f.ZCache={require:function(a,g,f){var d,b,j,h=[];g=g||!1;"string"===typeof a?h.push(a):"undefined"!==typeof a.length&&(h=a);d=h.length;if(c.isCompatible())for(a=0;a<d;a+=1)b=h[a],"object"===typeof b?"boolean"===typeof b.noCache?c.putInHead(e.scriptsPath+b.file,b.noCache):c.putInHead(e.scriptsPath+b.file):"string"===typeof b&&(b=e.scriptsPath+b,!0===g?c.putInHead(b,!0):c.hasCache(b)?(j=
c.getFromCache(b),c.isExpired(j)?c.loadScriptText(b):c.putInHead(j.data)):c.loadScriptText(b));else for(a=0;a<d;a+=1)b=h[a],"object"===typeof b?c.putInHead(e.scriptsPath+b.file):"string"===typeof b&&(b=e.scriptsPath+b,c.putInHead(b));c.processStack(f)},setOption:function(a,c){e[a]=c},remove:function(a){c.removeFromCache(a)}}})(this);